(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{"/yGZ":function(n,l,e){"use strict";e.r(l);var t=e("8Y7J");class u{}var o=e("pMnS"),s=e("MKJQ"),i=e("sZkV");class r{constructor(){}ngOnInit(){}}var a=t.nb({encapsulation:0,styles:[["#div-spinner[_ngcontent-%COMP%]{display:block;position:fixed;width:100%;height:100%;top:0;right:0;background-color:rgba(0,0,0,.5);z-index:10}#spinner[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;top:calc(50% - 25px);left:calc(50% - 25px)}"]],data:{}});function c(n){return t.Fb(0,[(n()(),t.pb(0,0,null,null,2,"div",[["id","div-spinner"]],null,null,null,null,null)),(n()(),t.pb(1,0,null,null,1,"ion-spinner",[["color","success"],["id","spinner"],["name","crescent"]],null,null,null,s.P,s.t)),t.ob(2,49152,null,0,i.nb,[t.h,t.k,t.x],{color:[0,"color"],name:[1,"name"]},null)],(function(n,l){n(l,2,0,"success","crescent")}),null)}var p=e("s7LF"),b=e("SVse"),h=e("IheW"),g=e("rj1t"),d=e("JIr8"),v=e("AytR");const f={headers:new h.g({"Content-Type":"application/json"})};let m=(()=>{class n{constructor(n,l){this.http=n,this.tok=l,this.urlLogin="api/Login",this._user=null}setHeaders(){this.httpOptions={headers:new h.g({"Content-Type":"application/json",Authorization:"Bearer "+this.tok.getTokJwt()})}}confirmCredentials(n){let l={username:n.username,password:n.password};return this.http.post(this.getUrl(this.urlLogin),l,{headers:f.headers}).pipe(Object(d.a)((n,l)=>"0"))}Captcha(){return this.setHeaders(),this.http.post(this.getUrl(this.urlLogin+"/captcha"),this.httpOptions).pipe()}set_User(n){this._user=n}getUrl(n){return v.a.baseUrl+n}}return n.ngInjectableDef=t.Jb({factory:function(){return new n(t.Kb(h.c),t.Kb(g.a))},token:n,providedIn:"root"}),n})();class y{}var k=e("kNur");class C{constructor(n,l,e,t,u){this.authService=n,this._router=l,this._MasinfoService=e,this.tok=t,this.toastCtrl=u,this.user="",this.password="",this.showSpinner=!1}ngOnInit(){console.log("Inicio login")}login(){if(""!=this.user&&""!=this.password){console.log(this.user),console.log(this.password);let n={username:this.user,password:this.password};this.showSpinner=!0,this.authService.confirmCredentials(n).subscribe(n=>{console.log(n),this.showSpinner=!1,"0"!==n.substring(0,3)?(this._MasinfoService.presentToast("Ingreso exitoso"),this.userValid(n)):this._MasinfoService.presentToast("Ingreso Incorrrecto")},n=>{console.error(n),this._MasinfoService.presentToast(n),this.showSpinner=!1})}else this._MasinfoService.presentToast("Ingrese por favor sus credenciales de acceso")}userValid(n){console.log(n);const l=new y;if("0"!==n){const e=n.split(".",3),t=JSON.parse(atob(e[1]));this._MasinfoService.SetUser(t),l.securityLevel=t.role,l.username=t.unique_name,this.tok.setTokJwt(n),this.tok.setUser(t.primarysid),this.tok.setExpJwt(new Date(1e3*t.exp))}else l.securityLevel=0;this.authService.set_User(l),this._router.navigate(["/inicio"])}}var w=e("iInd"),x=t.nb({encapsulation:0,styles:[["h1[_ngcontent-%COMP%]{text-align:center;font-size:2em}"]],data:{}});function A(n){return t.Fb(0,[(n()(),t.pb(0,0,null,null,1,"app-spinner",[],null,null,null,c,a)),t.ob(1,114688,null,0,r,[],null,null)],(function(n,l){n(l,1,0)}),null)}function M(n){return t.Fb(0,[(n()(),t.pb(0,0,null,null,36,"ion-content",[],null,null,null,s.H,s.l)),t.ob(1,49152,null,0,i.s,[t.h,t.k,t.x],null,null),(n()(),t.pb(2,0,null,0,34,"div",[["class","container p-3"],["style","margin-top: 15%;"]],null,null,null,null,null)),(n()(),t.pb(3,0,null,null,2,"h1",[["class","c-tAzul0"]],null,null,null,null,null)),(n()(),t.pb(4,0,null,null,0,"img",[["src","../../../assets/Logo-movistar-mobile.svg"],["width","50"]],null,null,null,null,null)),(n()(),t.Eb(-1,null,[" MoviTest"])),(n()(),t.pb(6,0,null,null,13,"ion-item",[["class","c-tAzul0 mt-5"]],null,null,null,s.L,s.p)),t.ob(7,49152,null,0,i.F,[t.h,t.k,t.x],null,null),(n()(),t.pb(8,0,null,0,4,"ion-label",[["position","floating"]],null,null,null,s.M,s.q)),t.ob(9,49152,null,0,i.L,[t.h,t.k,t.x],{position:[0,"position"]},null),(n()(),t.pb(10,0,null,0,1,"ion-icon",[["name","person"]],null,null,null,s.J,s.n)),t.ob(11,49152,null,0,i.A,[t.h,t.k,t.x],{name:[0,"name"]},null),(n()(),t.Eb(-1,0,[" Usuario"])),(n()(),t.pb(13,0,null,0,6,"ion-input",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.Ab(n,14)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t.Ab(n,14)._handleInputEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(o.user=e)&&u),u}),s.K,s.o)),t.ob(14,16384,null,0,i.Gb,[t.k],null,null),t.Bb(1024,null,p.d,(function(n){return[n]}),[i.Gb]),t.ob(16,671744,null,0,p.g,[[8,null],[8,null],[8,null],[6,p.d]],{model:[0,"model"]},{update:"ngModelChange"}),t.Bb(2048,null,p.e,null,[p.g]),t.ob(18,16384,null,0,p.f,[[4,p.e]],null,null),t.ob(19,49152,null,0,i.E,[t.h,t.k,t.x],null,null),(n()(),t.pb(20,0,null,null,13,"ion-item",[["class","c-tAzul0"]],null,null,null,s.L,s.p)),t.ob(21,49152,null,0,i.F,[t.h,t.k,t.x],null,null),(n()(),t.pb(22,0,null,0,4,"ion-label",[["position","floating"]],null,null,null,s.M,s.q)),t.ob(23,49152,null,0,i.L,[t.h,t.k,t.x],{position:[0,"position"]},null),(n()(),t.pb(24,0,null,0,1,"ion-icon",[["name","key"]],null,null,null,s.J,s.n)),t.ob(25,49152,null,0,i.A,[t.h,t.k,t.x],{name:[0,"name"]},null),(n()(),t.Eb(-1,0,[" Contrase\xf1a"])),(n()(),t.pb(27,0,null,0,6,"ion-input",[["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.Ab(n,28)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t.Ab(n,28)._handleInputEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(o.password=e)&&u),u}),s.K,s.o)),t.ob(28,16384,null,0,i.Gb,[t.k],null,null),t.Bb(1024,null,p.d,(function(n){return[n]}),[i.Gb]),t.ob(30,671744,null,0,p.g,[[8,null],[8,null],[8,null],[6,p.d]],{model:[0,"model"]},{update:"ngModelChange"}),t.Bb(2048,null,p.e,null,[p.g]),t.ob(32,16384,null,0,p.f,[[4,p.e]],null,null),t.ob(33,49152,null,0,i.E,[t.h,t.k,t.x],{type:[0,"type"]},null),(n()(),t.pb(34,0,null,null,2,"ion-button",[["class","button mt-3"],["color","primary"],["expand","block"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.login()&&t),t}),s.y,s.c)),t.ob(35,49152,null,0,i.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Eb(-1,0,[" INGRESAR "])),(n()(),t.eb(16777216,null,null,1,null,A)),t.ob(38,16384,null,0,b.h,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component;n(l,9,0,"floating"),n(l,11,0,"person"),n(l,16,0,e.user),n(l,23,0,"floating"),n(l,25,0,"key"),n(l,30,0,e.password),n(l,33,0,"password"),n(l,35,0,"primary","block"),n(l,38,0,e.showSpinner)}),(function(n,l){n(l,13,0,t.Ab(l,18).ngClassUntouched,t.Ab(l,18).ngClassTouched,t.Ab(l,18).ngClassPristine,t.Ab(l,18).ngClassDirty,t.Ab(l,18).ngClassValid,t.Ab(l,18).ngClassInvalid,t.Ab(l,18).ngClassPending),n(l,27,0,t.Ab(l,32).ngClassUntouched,t.Ab(l,32).ngClassTouched,t.Ab(l,32).ngClassPristine,t.Ab(l,32).ngClassDirty,t.Ab(l,32).ngClassValid,t.Ab(l,32).ngClassInvalid,t.Ab(l,32).ngClassPending)}))}function _(n){return t.Fb(0,[(n()(),t.pb(0,0,null,null,1,"app-login",[],null,null,null,M,x)),t.ob(1,114688,null,0,C,[m,w.m,k.a,g.a,i.Hb],null,null)],(function(n,l){n(l,1,0)}),null)}var I=t.lb("app-login",C,_,{},{},[]);class S{}var E=e("j1ZV");e.d(l,"LoginPageModuleNgFactory",(function(){return B}));var B=t.mb(u,[],(function(n){return t.xb([t.yb(512,t.j,t.X,[[8,[o.a,I]],[3,t.j],t.v]),t.yb(4608,b.j,b.i,[t.s,[2,b.p]]),t.yb(4608,p.i,p.i,[]),t.yb(4608,i.a,i.a,[t.x,t.g]),t.yb(4608,i.Bb,i.Bb,[i.a,t.j,t.p]),t.yb(4608,i.Eb,i.Eb,[i.a,t.j,t.p]),t.yb(1073742336,b.b,b.b,[]),t.yb(1073742336,p.h,p.h,[]),t.yb(1073742336,p.a,p.a,[]),t.yb(1073742336,i.zb,i.zb,[]),t.yb(1073742336,w.o,w.o,[[2,w.t],[2,w.m]]),t.yb(1073742336,S,S,[]),t.yb(1073742336,E.a,E.a,[]),t.yb(1073742336,u,u,[]),t.yb(1024,w.k,(function(){return[[{path:"",component:C}]]}),[])])}))}}]);